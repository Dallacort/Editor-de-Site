<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Normalização de Tamanhos de Imagens</title>
    
    <!-- CSS do Editor -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="image-normalization-styles.css">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        
        .controls {
            margin: 20px 0;
            padding: 15px;
            background: #e9ecef;
            border-radius: 5px;
        }
        
        .controls button {
            margin: 5px;
            padding: 10px 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .controls button:hover {
            background: #0056b3;
        }
        
        .controls button.danger {
            background: #dc3545;
        }
        
        .controls button.danger:hover {
            background: #c82333;
        }
        
        .controls button.success {
            background: #28a745;
        }
        
        .controls button.success:hover {
            background: #1e7e34;
        }
        
        .demo-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .demo-background {
            width: 100%;
            height: 300px;
            background-image: url('assets/images/banner/01.webp');
            background-size: cover;
            background-position: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        
        .status-info {
            margin: 15px 0;
            padding: 10px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
            color: #155724;
        }
        
        .warning-info {
            margin: 15px 0;
            padding: 10px;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            color: #856404;
        }
        
        .debug-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        .before-after {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        
        .before-after > div {
            flex: 1;
            text-align: center;
        }
        
        .before-after img {
            max-width: 100%;
            height: 200px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="debug-toggle">
        <button onclick="toggleDebugMode()" id="debugBtn">Ativar Debug</button>
    </div>

    <header>
        <h1>🎯 Teste do Sistema de Normalização de Imagens</h1>
        <p>Este é um ambiente de teste para o sistema que normaliza todas as imagens para o mesmo tamanho do background principal.</p>
    </header>

    <!-- Controles principais -->
    <div class="test-section">
        <h2>🔧 Controles de Normalização</h2>
        
        <div class="controls">
            <button onclick="normalizeAll()" class="success">
                🚀 Normalizar Todas as Imagens
            </button>
            
            <button onclick="normalizeExisting()">
                📷 Normalizar Apenas Existentes
            </button>
            
            <button onclick="normalizeCustom()" class="info">
                📐 Usar Dimensões Personalizadas
            </button>
            
            <button onclick="showReport()">
                📊 Mostrar Relatório
            </button>
            
            <button onclick="resetNormalization()" class="danger">
                🔄 Resetar Normalização
            </button>
        </div>
        
        <div class="status-info" id="statusInfo">
            Status: Sistema carregado e pronto para uso.
        </div>
    </div>

    <!-- Background principal (será usado como referência) -->
    <div class="test-section">
        <h2>🎨 Background Principal (Referência)</h2>
        <p>Este background será usado como referência para determinar o tamanho alvo para todas as imagens.</p>
        
        <div class="demo-background" data-key="bg-principal">
            Background Principal - 1200x400px
        </div>
    </div>

    <!-- Imagens de teste -->
    <div class="test-section">
        <h2>📸 Imagens de Teste</h2>
        <p>Estas imagens têm tamanhos diferentes. Após a normalização, todas terão o mesmo tamanho do background principal.</p>
        
        <div class="demo-images">
            <div>
                <h4>Imagem 1 (Portrait)</h4>
                <img src="assets/images/about/01.webp" alt="Teste 1" data-key="img-1" style="width: 200px; height: 300px; border: 2px solid #ddd;">
            </div>
            
            <div>
                <h4>Imagem 2 (Landscape)</h4>
                <img src="assets/images/blog/01.webp" alt="Teste 2" data-key="img-2" style="width: 400px; height: 200px; border: 2px solid #ddd;">
            </div>
            
            <div>
                <h4>Imagem 3 (Square)</h4>
                <img src="assets/images/team/01.webp" alt="Teste 3" data-key="img-3" style="width: 250px; height: 250px; border: 2px solid #ddd;">
            </div>
            
            <div>
                <h4>Background Secundário</h4>
                <div style="width: 300px; height: 180px; background-image: url('assets/images/service/01.webp'); background-size: cover; border: 2px solid #ddd;" data-key="bg-2">
                </div>
            </div>
        </div>
    </div>

    <!-- Teste de antes e depois -->
    <div class="test-section">
        <h2>🔍 Comparação Antes/Depois</h2>
        <div class="before-after">
            <div>
                <h4>Antes da Normalização</h4>
                <img src="assets/images/portfolio/01.webp" alt="Antes" style="width: 150px; height: 100px;">
                <p>Tamanho original diferente</p>
            </div>
            <div>
                <h4>Depois da Normalização</h4>
                <img src="assets/images/portfolio/02.webp" alt="Depois" data-key="compare-img">
                <p>Tamanho normalizado</p>
            </div>
        </div>
    </div>

    <!-- Teste com slides -->
    <div class="test-section">
        <h2>🎠 Teste com Slides</h2>
        <div class="swiper-container" style="height: 300px;">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="assets/images/slider/image1.jpg" alt="Slide 1" data-key="slide-1">
                </div>
                <div class="swiper-slide">
                    <img src="assets/images/slider/image2.jpg" alt="Slide 2" data-key="slide-2">
                </div>
            </div>
        </div>
    </div>

    <!-- Console de comandos -->
    <div class="test-section">
        <h2>💻 Console de Comandos</h2>
        <p>Abra o console do navegador (F12) para usar comandos avançados:</p>
        
        <div style="background: #000; color: #0f0; padding: 15px; border-radius: 5px; font-family: monospace;">
            <div>// Comandos disponíveis:</div>
            <div>hardemNormalize.all()              // Normalizar tudo</div>
            <div>hardemNormalize.existing()        // Só existentes</div>
            <div>hardemNormalize.toDimensions(w,h) // Tamanho específico</div>
            <div>hardemNormalize.report()          // Relatório</div>
            <div>hardemNormalize.reset()           // Resetar</div>
            <div>hardemNormalize.help()            // Ajuda</div>
        </div>
    </div>

    <!-- Warning sobre dependências -->
    <div class="warning-info">
        <strong>⚠️ Importante:</strong> Este teste requer que o Editor Hardem esteja carregado. 
        Certifique-se de que os scripts do editor estão incluídos na página.
    </div>

    <!-- Scripts do Editor -->
    <script src="assets/js/vendor/jquery.min.js"></script>
    <script src="assets/js/editor/editor-core.js"></script>
    <script src="assets/js/editor/editor-utils.js"></script>
    <script src="assets/js/editor/editor-ui.js"></script>
    <script src="assets/js/editor/editor-image.js"></script>
    <script src="normalize-image-sizes.js"></script>

    <script>
        // Funções de controle da interface
        function normalizeAll() {
            updateStatus('Normalizando todas as imagens...', 'info');
            try {
                hardemNormalize.all();
            } catch (error) {
                updateStatus('Erro: ' + error.message, 'error');
            }
        }

        function normalizeExisting() {
            updateStatus('Normalizando imagens existentes...', 'info');
            try {
                hardemNormalize.existing();
            } catch (error) {
                updateStatus('Erro: ' + error.message, 'error');
            }
        }

        function normalizeCustom() {
            const width = prompt('Largura desejada (px):', '1200');
            const height = prompt('Altura desejada (px):', '400');
            
            if (width && height) {
                updateStatus(`Normalizando para ${width}x${height}px...`, 'info');
                try {
                    hardemNormalize.toDimensions(width, height);
                } catch (error) {
                    updateStatus('Erro: ' + error.message, 'error');
                }
            }
        }

        function showReport() {
            try {
                hardemNormalize.report();
                updateStatus('Relatório exibido no console', 'success');
            } catch (error) {
                updateStatus('Erro: ' + error.message, 'error');
            }
        }

        function resetNormalization() {
            if (confirm('Tem certeza que deseja resetar todas as normalizações?')) {
                updateStatus('Resetando normalizações...', 'info');
                try {
                    hardemNormalize.reset();
                    updateStatus('Normalizações resetadas', 'success');
                } catch (error) {
                    updateStatus('Erro: ' + error.message, 'error');
                }
            }
        }

        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('statusInfo');
            statusDiv.textContent = 'Status: ' + message;
            
            // Remover classes anteriores
            statusDiv.className = statusDiv.className.replace(/status-\w+/g, '');
            
            // Adicionar nova classe
            switch (type) {
                case 'success':
                    statusDiv.style.background = '#d4edda';
                    statusDiv.style.borderColor = '#c3e6cb';
                    statusDiv.style.color = '#155724';
                    break;
                case 'error':
                    statusDiv.style.background = '#f8d7da';
                    statusDiv.style.borderColor = '#f5c6cb';
                    statusDiv.style.color = '#721c24';
                    break;
                case 'info':
                default:
                    statusDiv.style.background = '#d1ecf1';
                    statusDiv.style.borderColor = '#bee5eb';
                    statusDiv.style.color = '#0c5460';
                    break;
            }
        }

        function toggleDebugMode() {
            const body = document.body;
            const btn = document.getElementById('debugBtn');
            
            if (body.classList.contains('hardem-debug')) {
                body.classList.remove('hardem-debug');
                btn.textContent = 'Ativar Debug';
            } else {
                body.classList.add('hardem-debug');
                btn.textContent = 'Desativar Debug';
            }
        }

        // Verificar se o editor está carregado
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (typeof hardemNormalize === 'undefined') {
                    updateStatus('ERRO: Editor Hardem não encontrado!', 'error');
                    document.querySelector('.controls').style.display = 'none';
                } else {
                    updateStatus('Sistema carregado com sucesso!', 'success');
                }
            }, 1000);
        });

        // Auto-demo se solicitado via URL
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('auto-demo') === 'true') {
            setTimeout(() => {
                console.log('🚀 Executando demo automático...');
                normalizeAll();
            }, 2000);
        }
    </script>


    <!-- Editor Refatorado - Módulos (ordem importante) -->
    <script src="assets/js/editor/editor-utils.js"></script>
    <script src="assets/js/editor/editor-storage.js"></script>
    <script src="assets/js/editor/editor-ui.js"></script>
    <script src="assets/js/editor/editor-text.js"></script>
    <script src="assets/js/editor/editor-image.js"></script>
    <script src="assets/js/editor/editor-carousel.js"></script>
    <script src="assets/js/editor/editor-core.js"></script>
    <script src="assets/js/editor-refatorado.js"></script>
</body>
</html> 